{
   "config": {
      "target": "https://clipspromise.com",
      "phase": [
         {
            "duration": 300,
            "arrivalRate": 50
         }
      ],
      "payload": {
         "path": "./data.csv",
         "fields": [
            "promiseId", 
            "reviewId",
            "email",
            "password"
         ]
      }
   },

   "scenarios": [
      {
         "name": "로그인과 약속 생성 후 리뷰 작성/수정까지",
         "flow": [
            {
               "post": {
                  "url": "/api/auth/signin",
                  "json": {
                     "email": "{{email}}",
                     "password": "{{password}}"
                  },
                  "capture":{
                    "json" : "accessToken",
                    "as": "accessToken"
                  }
               }
            },
            {
               "get": {
                  "url": "/api/promise/{{promiseId}}",
                  "headers": {
                     "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjUsImlhdCI6MTY2NDczNDIwOSwiZXhwIjoxNjY0NzM3ODA5fQ.zYib2a06qRckYuj5Ke1Uj0z08_3sxDFC1ZNn43OPB8o"
                  }
               }
            },
            {
               "post": {
                  "url": "/api/review/{{promiseId}}",
                  "formdata": {
                     "content": "사진",
                     "image": {
                        "fromFile": "./files/{{ filename }}"
                  }
               },
                  "headers": {
                     "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjUsImlhdCI6MTY2NDczNDIwOSwiZXhwIjoxNjY0NzM3ODA5fQ.zYib2a06qRckYuj5Ke1Uj0z08_3sxDFC1ZNn43OPB8o"
                  }
               }
            }
         ]
      }
   ]
}