{
   "config": {
      "target": "http://127.0.0.1:3000",
      "phases": [
         {
            "duration": 20,
            "arrivalRate": 5,
            "name":"warm up"
         },
         {
            "duration": 40,
            "arrivalRate": 10,
            "rampTo":25,
            "name":"Ramp up load"
         }
      ],
      "payload": {
         "path": "./data.csv",
         "fields": [
            "promiseId", 
            "reviewId",
            "email",
            "password"
         ]
      }
   },

   "scenarios": [
      {
         "name": "로그인과 약속 생성 후 리뷰 작성/수정까지",
         "flow": [
            {
               "post": {
                  "url": "/api/auth/signin",
                  "json": {
                     "email": "{{email}}",
                     "password": "{{password}}"
                  },
                     "headers": {
                        "Origin": "https://clipspromise.com"
                     }
                  }
            },
            {
               "post": {
                  "url": "/api/main",
                  "json": {
                     "location": "서울시 강남구",
                     "category": "카페"
                  },
                  "headers": {
                     "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjUsImlhdCI6MTY2NDc0ODA2MywiZXhwIjoxNjY0NzUxNjYzfQ.EejRKkE6SZ9gf9owBvvqIYds-zYCkie3aB5Gvii1H7Y",
                     "Origin": "https://clipspromise.com"
                  }
               }
            },
            {
               "post": {
                  "url": "/api/main/crawlAll",
                  "json": {
                     "placeUrl": "http://place.map.kakao.com/19601351"
                  },
                  "headers": {
                     "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjUsImlhdCI6MTY2NDc0ODA2MywiZXhwIjoxNjY0NzUxNjYzfQ.EejRKkE6SZ9gf9owBvvqIYds-zYCkie3aB5Gvii1H7Y",
                     "Origin": "https://clipspromise.com"
                  }
               }
            },
            {
               "get": {
                  "url": "/api/promise/{{promiseId}}",
                  "headers": {
                     "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjUsImlhdCI6MTY2NDc0ODA2MywiZXhwIjoxNjY0NzUxNjYzfQ.EejRKkE6SZ9gf9owBvvqIYds-zYCkie3aB5Gvii1H7Y",
                     "Origin": "https://clipspromise.com"
                  }
               }
            },
            {
               "get": {
                  "url": "/api/review{{reviewId}}",
                  "headers": {
                     "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjUsImlhdCI6MTY2NDc0ODA2MywiZXhwIjoxNjY0NzUxNjYzfQ.EejRKkE6SZ9gf9owBvvqIYds-zYCkie3aB5Gvii1H7Y",
                     "Origin": "https://clipspromise.com"
                  }
               }
            }
         ]
      }
   ]
}